<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4K Mania - Ethan Liu</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="/game/styles/rhythm.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Outfit:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="wrap">
        <header class="topbar">
            <h1>4K Mania</h1>
            <a href="/game/" class="home">‚Üê Back</a>
        </header>

        <div id="menu" class="menu">
            <div class="menu-content">
                <h2>Settings</h2>
                <div class="settings-row">
                    <label>Keybinds</label>
                    <div class="keybind-row">
                        <div class="keybind-item">
                            <span class="lane-label">Lane 1</span>
                            <button type="button" class="keybind-btn" data-lane="0">D</button>
                        </div>
                        <div class="keybind-item">
                            <span class="lane-label">Lane 2</span>
                            <button type="button" class="keybind-btn" data-lane="1">F</button>
                        </div>
                        <div class="keybind-item">
                            <span class="lane-label">Lane 3</span>
                            <button type="button" class="keybind-btn" data-lane="2">J</button>
                        </div>
                        <div class="keybind-item">
                            <span class="lane-label">Lane 4</span>
                            <button type="button" class="keybind-btn" data-lane="3">K</button>
                        </div>
                    </div>
                </div>
                <div class="settings-row">
                    <label>Scroll speed</label>
                    <input type="range" id="scrollSpeed" min="5" max="40" value="20" step="1">
                    <span id="scrollSpeedValue">20</span>
                </div>
                <div class="settings-row">
                    <label>Skin</label>
                    <div class="skin-buttons">
                        <button type="button" class="skin-btn active" data-skin="circle">Circle</button>
                        <button type="button" class="skin-btn" data-skin="square">Square</button>
                    </div>
                </div>
                <div class="settings-row">
                    <label>Layout</label>
                    <button type="button" class="customize-judge-btn" id="customizeGameplayUIBtn">Customize</button>
                </div>
                <div class="settings-row">
                    <label>Receptor key feedback</label>
                    <div class="receptor-feedback-toggles">
                        <label class="settings-toggle-row">
                            <input type="checkbox" id="receptorLightCheck" checked>
                            <span>Light up on key press</span>
                        </label>
                        <label class="settings-toggle-row">
                            <input type="checkbox" id="receptorPulseCheck" checked>
                            <span>Pulse on key press</span>
                        </label>
                    </div>
                </div>

                <div id="gameplayUICustomizeOverlay" class="gameplay-ui-customize-overlay" style="display: none;">
                    <div class="gameplay-ui-customize-content">
                        <h3>Customize</h3>
                        <p class="gameplay-ui-customize-hint">Select an element, then change its visibility, size, or drag on the board to move.</p>
                        <div class="gameplay-ui-preview-area">
                            <div class="gameplay-ui-preview-corners">
                                <div class="gameplay-ui-topleft-preview" id="topLeftPreview">
                                    <div class="gameplay-ui-preview-score" id="previewScore">Score: 12345</div>
                                </div>
                                <div class="gameplay-ui-topright-preview" id="topRightPreview">
                                    <div class="gameplay-ui-preview-accuracy" id="previewAccuracy">98.50%</div>
                                    <div class="gameplay-ui-preview-timer" id="previewTimer">1:23 / 2:00</div>
                                </div>
                            </div>
                            <div class="gameplay-ui-board-wrap">
                                <div class="judge-preview-board gameplay-ui-preview-board" id="judgePreviewBoard">
                                    <div class="judge-preview-lanes">
                                        <div class="judge-preview-lane"></div>
                                        <div class="judge-preview-lane"></div>
                                        <div class="judge-preview-lane"></div>
                                        <div class="judge-preview-lane"></div>
                                    </div>
                                    <div class="judge-preview-draggable" id="judgePreviewDraggable">PERFECT</div>
                                    <div class="combo-preview-draggable" id="comboPreviewDraggable">0</div>
                                </div>
                            </div>
                        </div>
                        <div class="gameplay-ui-tabs">
                            <button type="button" class="gameplay-ui-tab active" data-panel="judge">Judge</button>
                            <button type="button" class="gameplay-ui-tab" data-panel="combo">Combo</button>
                            <button type="button" class="gameplay-ui-tab" data-panel="score">Score</button>
                            <button type="button" class="gameplay-ui-tab" data-panel="accuracy">Accuracy</button>
                            <button type="button" class="gameplay-ui-tab" data-panel="timer">Timer</button>
                        </div>
                        <div class="gameplay-ui-panels">
                            <div class="gameplay-ui-panel active" id="panel-judge">
                                <label class="gameplay-ui-toggle-row">
                                    <input type="checkbox" id="judgeVisibleCheck" checked>
                                    <span>Show judge</span>
                                </label>
                                <div class="gameplay-ui-size-row">
                                    <label>Size</label>
                                    <input type="range" id="judgeSizeSlider" min="12" max="36" value="22" step="2">
                                    <span id="judgeSizeValue">22</span>
                                </div>
                                <p class="gameplay-ui-drag-hint">Drag on the board to move.</p>
                            </div>
                            <div class="gameplay-ui-panel" id="panel-combo">
                                <label class="gameplay-ui-toggle-row">
                                    <input type="checkbox" id="comboVisibleCheck" checked>
                                    <span>Show combo</span>
                                </label>
                                <div class="gameplay-ui-size-row">
                                    <label>Size</label>
                                    <input type="range" id="comboSizeSlider" min="14" max="32" value="20" step="2">
                                    <span id="comboSizeValue">20</span>
                                </div>
                                <p class="gameplay-ui-drag-hint">Drag on the board to move.</p>
                            </div>
                            <div class="gameplay-ui-panel" id="panel-score">
                                <label class="gameplay-ui-toggle-row">
                                    <input type="checkbox" id="scoreVisibleCheck" checked>
                                    <span>Show score</span>
                                </label>
                                <div class="gameplay-ui-size-row">
                                    <label>Size</label>
                                    <input type="range" id="scoreSizeSlider" min="12" max="24" value="14" step="1">
                                    <span id="scoreSizeValue">14</span>
                                </div>
                                <p class="gameplay-ui-drag-hint">Score appears top-left during play.</p>
                            </div>
                            <div class="gameplay-ui-panel" id="panel-accuracy">
                                <label class="gameplay-ui-toggle-row">
                                    <input type="checkbox" id="accuracyVisibleCheck" checked>
                                    <span>Show accuracy</span>
                                </label>
                                <div class="gameplay-ui-size-row">
                                    <label>Size</label>
                                    <input type="range" id="accuracySizeSlider" min="12" max="24" value="16" step="1">
                                    <span id="accuracySizeValue">16</span>
                                </div>
                            </div>
                            <div class="gameplay-ui-panel" id="panel-timer">
                                <label class="gameplay-ui-toggle-row">
                                    <input type="checkbox" id="timerVisibleCheck" checked>
                                    <span>Show timer</span>
                                </label>
                                <div class="gameplay-ui-size-row">
                                    <label>Size</label>
                                    <input type="range" id="timerSizeSlider" min="12" max="24" value="16" step="1">
                                    <span id="timerSizeValue">16</span>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="judge-customize-done" id="gameplayUICustomizeDone">Done</button>
                    </div>
                </div>

                <h2>Game</h2>
                <div class="settings-row">
                    <label>Notes per second (difficulty)</label>
                    <input type="range" id="notesPerSecond" min="1" max="30" value="8" step="1">
                    <span id="notesPerSecondValue">8</span>
                </div>
                <div class="settings-row">
                    <label>Game style</label>
                    <div class="style-buttons">
                        <button type="button" class="style-btn" data-style="chords">Chords</button>
                        <button type="button" class="style-btn active" data-style="stream">Stream</button>
                        <button type="button" class="style-btn" data-style="random">Random</button>
                    </div>
                </div>
                <div class="settings-row">
                    <label>Duration</label>
                    <input type="range" id="gameDuration" min="15" max="300" value="60" step="15">
                    <span id="gameDurationValue">1:00</span>
                </div>

                <div class="instructions">
                    <h3>How to play</h3>
                    <p>Hit the keys when notes reach the receptor line.</p>
                </div>
                <button type="button" class="start-btn">Start</button>
            </div>
        </div>

        <main id="gameContainer" class="game-container" style="display: none;">
            <div class="game-hud game-hud-score" id="scoreWrap">
                <div class="hud-score">Score: <span id="score">0</span></div>
            </div>
            <div class="game-hud-topright">
                <div class="hud-accuracy-wrap" id="accuracyWrap"><span id="accuracy">100.00</span>%</div>
                <div class="hud-timer-wrap" id="timerWrap"><span id="timer">0:00</span> / <span id="timerTotal">1:00</span></div>
            </div>
            <div class="playfield-scaler" id="playfieldScaler">
            <div class="playfield">
                <div class="judge-wrap">
                    <div class="judge" id="judge"></div>
                </div>
                <div class="combo-wrap" id="comboWrap">
                    <span class="combo-number" id="combo">0</span>
                </div>
                <div class="lanes" id="lanes">
                    <div class="lane" data-lane="0"><div class="receptor" data-skin="circle"></div><div class="notes-layer"></div></div>
                    <div class="lane" data-lane="1"><div class="receptor" data-skin="circle"></div><div class="notes-layer"></div></div>
                    <div class="lane" data-lane="2"><div class="receptor" data-skin="circle"></div><div class="notes-layer"></div></div>
                    <div class="lane" data-lane="3"><div class="receptor" data-skin="circle"></div><div class="notes-layer"></div></div>
                </div>
            </div>
            </div>
            <div class="keys-hint">
                <span id="key1">D</span> <span id="key2">F</span> <span id="key3">J</span> <span id="key4">K</span>
            </div>
            <div id="pauseOverlay" class="pause-overlay" style="display: none;">
                <div class="pause-content">
                    <h2>Paused</h2>
                    <button type="button" class="pause-btn" id="pauseContinue">Continue</button>
                    <button type="button" class="pause-btn secondary" id="pauseMenu">Menu</button>
                </div>
            </div>
            <div id="results" class="results" style="display: none;">
                <h2>Results</h2>
                <div class="results-stats">
                    <span>Perfect: <strong id="resPerfect">0</strong></span>
                    <span>Great: <strong id="resGreat">0</strong></span>
                    <span>Good: <strong id="resGood">0</strong></span>
                    <span>Miss: <strong id="resMiss">0</strong></span>
                </div>
                <p class="results-accuracy">Accuracy: <strong id="resAccuracy">100.00</strong>%</p>
                <p class="results-score">Score: <strong id="resScore">0</strong></p>
                <button type="button" class="back-btn">Back to menu</button>
            </div>
        </main>
    </div>
    <script src="/game/src/rhythm.js"></script>
</body>
</html>
